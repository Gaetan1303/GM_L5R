services:
  - type: web
    name: gamemaster-backend
    env: node
    region: frankfurt
    plan: free
    buildCommand: cd gamemaster-backend && yarn install
    startCommand: cd gamemaster-backend && yarn start
    envVars:
      - key: NODE_VERSION
        value: 22.16.0
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: ALLOWED_ORIGINS
        value: https://gaetan1303.github.io
      - key: RATE_LIMIT_WINDOW_MS
        value: 900000
      - key: RATE_LIMIT_MAX_REQUESTS
        value: 100
      - key: WS_MAX_CONNECTIONS_PER_IP
        value: 10
      - key: WS_HEARTBEAT_INTERVAL
        value: 30000
      - key: WS_TIMEOUT
        value: 60000
      - key: MAX_REQUEST_SIZE
        value: 10kb
      - key: HELMET_ENABLED
        value: true
      - key: LOG_LEVEL
        value: warn
      - key: HIDE_SENSITIVE_LOGS
        value: true
      #  AJOUTER VOS CLÉS SECRÈTES DANS LE DASHBOARD RENDER
      # Ne pas mettre les vraies valeurs ici (fichier public)
      # JWT_SECRET: générer avec "yarn generate-secrets"
      # SESSION_SECRET: générer avec "yarn generate-secrets"  
      # WEBSOCKET_SECRET: générer avec "yarn generate-secrets"
